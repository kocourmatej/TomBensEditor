<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Inicializace


// Jednotlivé listy pro parametry 
surface_list     = ds_list_create(); // Seznam povrchů 
start_x          = ds_list_create(); // x1
start_y          = ds_list_create(); // y1
temp_x2          = ds_list_create(); // x2
temp_y2          = ds_list_create(); // y2


// Proměnné pro práci se selekcí a vytváření povrchů
clicked          = 0; // Kontrola, zda bylo tento step kliknuto myší (bool)
creating_surface = 0; // Zda vytvářime surface (bool)
clicked_index    = -1; // Index vybraného povrchu, -1 značí žádný povrch (int32)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Logika vykreslení surfaces

/*
Nedořešené - při vytváření povrchu se souřadnice uloží správně pouze pokud jsou zleva doprava, zezhora dolů. 
Opravím 13.10 

*/


// Nastavíme výchozí hodnotu pro vykreslování, víme jak na neinicializované c&amp;a reaguje HTML5 export
draw_set_color(c_black);
draw_set_alpha(1);

if (mouse_check_button_pressed(mb_left)) // Pokud klikneme LMB
   {
   clicked_index = -1;  // Nastavíme vybraný povrch na ůnevybraný"
   
   if (ds_list_size(surface_list) &gt; 0) // Je zbytečné iterovat, pokud nejsou vytvořené žádné povrchy
      {
      for (a = 0; a &lt; ds_list_size(surface_list); a++) // Iterujeme list povrchů
            {
            if (mouse_x &gt; start_x[| a] &amp;&amp; mouse_x &lt; temp_x2[| a] &amp;&amp; mouse_y &gt; start_y[| a] &amp;&amp; mouse_y &lt; temp_y2[| a]) // Pokud je myš v čtverci representující iterovaný povrch
               {
                clicked_index = a; // Uložíme si index tohoto povrchu 
                break; // Dál už iterovat nepotřebujeme
               }      
            }           
        }
        
    if (clicked_index = -1) // Pokud není vybraný žádný povrch a kliklo se, vytváříme nový povrch
    {
    creating_surface = 1; // Vytváříme nový povrch
    }
        
    // Do 2D vektoru si uložíme souřadnice kurzoru(x,y)
    start_xx = mouse_x;  // X-ová souřadnice
    start_yy = mouse_y;  // Y-ová souřadnice
   }
   
if (creating_surface) // Pokud tvoříme povrch
   {
    draw_rectangle(start_xx,start_yy,mouse_x,mouse_y,1); // Vykreslíme obdélník od počátečních k aktuálním souřadnicím kurzoru
    
    if (mouse_check_button_released(mb_left)) // Pokud pustíme LMB
       {       
        surface_x = abs(mouse_x-start_x); // Šířka surface (prozatím unused)
        surface_y = abs(mouse_y-start_y); // Výška surface (prozatím unused)    
        
        ds_list_add(surface_list,surface_create(room_width,room_height)); // Do listu uložíme nový povrch    
        
        // Do adekvátních listů zapíšeme souřadnice x1,y1,x2,y2   
        ds_list_add(temp_x2,mouse_x); 
        ds_list_add(temp_y2,mouse_y);       
        ds_list_add(start_x,start_xx);
        ds_list_add(start_y,start_yy);

        creating_surface = 0; // Povrch je vytvořen, můžeme vynulovat proměnnou
       }
   }

   if (ds_list_size(surface_list) &gt; 0) // Pokud existují nějaké povrchy
      {

        for (a = 0; a &lt; ds_list_size(surface_list); a++) // Proiterujeme list s povrchy
            {
            surface_set_target(surface_list[| a]); // Jako cíl kreslení nastavíme iterovaný povrch
            
            if (!creating_surface) // kreslíme za předpokladu, že nevytváříme povrch
               {
               
               // Ukázkové vykreslení povrchu
               draw_set_alpha(0.4);
               draw_rectangle(start_x[| a],start_y[| a],temp_x2[| a],temp_y2[| a],0);
               draw_set_alpha(0.7);
               draw_rectangle(start_x[| a],start_y[| a],temp_x2[| a],temp_y2[| a],1);
               draw_set_alpha(1);
               draw_text(start_x[| a],start_y[| a], "My id in list is: "+string(a));
               
               // Pokud je povrch označený jako aktivní, vypíšeme to
               if (clicked_index = a) {draw_text(start_x[| a],start_y[| a]+20, "I am active");}
               }
        surface_reset_target(); // Jako cíl kreslení nastavíme application_surface
        
        draw_surface(surface_list[| a],0,0); // vykreslíme iterovaný povrch
           }
      }
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
